## Hardware synchronization

We let pixhawk trigger the two cameras at the same time, which run at 30Hz. In this way, though the IMU run at 80Hz, the timestamps of the images and the IMU data are synchronized since they are generated by pixhawk.

Although we have synchronized the data, we still get an error 

```
Tried to add second view to a given cameraId & timestamp. Maybe try to reduce the approximate syncing tolerance
```

## Calibration

Unlike stereo camera calibration, it seems we can not move the camera-IMU system in a smooth way. Instead, we need to make sure that there is significant movement. 

Moreover, the rosbag file can not be too large. It should be within 1GB for the calibration to work efficiently. 

We need to first calibrate the stereo cameras, and use the resulting cam file as input. We also need to create the `imu.yaml` based on [this](https://github.com/ethz-asl/kalibr/wiki/yaml-formats).

The IMU we use is implemented in pixhawk, and according to [here](https://groups.google.com/forum/#!topic/px4users/Nv5nZ8PrsKM), the IMU model is MPU6050. Its datasheet can be found 
at [here](https://www.invensense.com/products/motion-tracking/6-axis/mpu-6050/). Although from the [wiki](https://github.com/ethz-asl/kalibr/wiki/IMU-Noise-Model), it 
seems that we could obtain the required data from the datasheet, we use the values mentioned in [here](https://groups.google.com/forum/#!topic/px4users/Nv5nZ8PrsKM).

Note that we should add `rostopic: /mavros/imu/data` in the beginning, which is not provided on the web page but is included in the [example](https://github.com/ethz-asl/kalibr/wiki/downloads).

To log the data, we can use `rosbag record`, and remember to include the IMU topic as well, eg `/mavros/imu/data`. 

Moreover, we can set the time interval we want to use by `--bag-from-to` as shown in the example. 

For the calibration command, remember to use `--time-calibration` as suggester [here](https://github.com/ethz-asl/kalibr/issues/40). 

## Validation

When we try to validate the camera calibration results, an error occurs: `numpy.linalg.linalg.LinAlgError: Singular matrix`.  

We then proceed to calibrate camera and IMU data. The `Reprojection error squared` is quite large, though the `baseline norm` and `Gravity vector in target cords` seem to be accurate.  